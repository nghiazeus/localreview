<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Lịch sử đánh giá</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
</head>

<body class="bg-blue-100 text-gray-800">
    <div class="p-px space-y-8 mt-3 ml-2">
        <nav class="mb-4 ml-2 mr-2 px-5 py-1 bg-white rounded-full shadow-md w-auto inline-flex">
            <ol class="flex flex-wrap items-center space-x-2 text-gray-700 dark:text-gray-300">
                <li th:each="breadcrumb, iterStat : ${breadcrumbs}" class="flex items-center">
                    <a th:if="${not #strings.isEmpty(breadcrumb.url) and !iterStat.last}" th:href="${breadcrumb.url}"
                        class="text-blue-500 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300"
                        th:text="${breadcrumb.title}"></a>
                    <span th:if="${#strings.isEmpty(breadcrumb.url) or iterStat.last}"
                        class="text-gray-500 dark:text-gray-400" th:text="${breadcrumb.title}"></span>
                    <i th:if="${!iterStat.last}"
                        class="bi bi-chevron-compact-right text-gray-500 dark:text-gray-400"></i>
                </li>
            </ol>
        </nav>
    </div>
    <div class="mx-auto md:p-6 bg-white shadow-lg md:rounded-lg max-w-3xl p-2 space-y-4">
    <h2 class="text-3xl font-bold mb-8 text-center text-indigo-600 mt-2">Lịch sử đánh giá</h2>

    <div th:each="review : ${reviewuser}"
        class="p-4 md:rounded-lg md:bg-gradient-to-r from-purple-100 to-blue-100 md:shadow-md max-h-60 overflow-y-auto">
        <div class="review-header flex justify-between items-center mb-4">
            <h3 class="text-xl font-semibold text-gray-700" th:text="'Tên cửa hàng: ' + ${review.store.storeName}">
            </h3>
            <div class="flex items-center">
                <div class="flex items-center mt-1">
                    <span class="text-yellow-500 text-lg">
                        <!-- Hiển thị các ngôi sao vàng theo điểm đánh giá -->
                        <span th:each="i : ${#numbers.sequence(1, review.rating)}">&#9733;</span>
                    </span>
                    <span class="text-gray-400 text-lg" th:if="${review.rating < 5}">
                        <!-- Hiển thị các ngôi sao xám cho phần còn lại nếu chưa đủ 5 sao -->
                        <span th:each="i : ${#numbers.sequence(1, 5 - review.rating)}">&#9733;</span>
                    </span>
                </div>
            </div>
        </div>

        <div class="flex justify-between items-start">
            <div class="review-date text-sm text-gray-500 w-2/3 overflow-auto max-h-32">
                <p class="review-comment text-base mb-4 text-gray-600" 
                th:text="${'Nội dung: ' + review.comment}"></p>
                <p th:text="${review.getRelativeReviewDate()}"></p>
                <p th:text="${#dates.format(review.reviewDate, 'dd/MM/yyyy')}"></p>
            </div>

            <div class="flex-shrink-0 mt-auto">
                <a th:href="@{/store/detail/{storeId}(storeId=${review.store.storeId})}"
                    class="bg-blue-500 text-white rounded-full px-4 py-2 text-sm inline-block hover:bg-blue-600 transition-colors duration-300">
                    Đến cửa hàng
                </a>
            </div>
        </div>
    </div>
</div>
    
</body>

</html>